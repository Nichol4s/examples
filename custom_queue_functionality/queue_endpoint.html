<!DOCTYPE html>
<html>
	<head>
		<title>Custom Queue endpoint - Surfly Examples</title>
		<link rel="stylesheet" href="../style.css">
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
	</head>
	<body>
		<header>
			<a href=" https://www.surfly.com/ ">
				<img alt="Delicious Mint" src="https://www.surfly.com/wp-content/themes/delicious/img/mint/logo.png">
			</a>
		</header>
		<div class="main_container">
			<h1>Example : Custom Queue endpoint</h1>
			<div class="back_navigation">
				<a href="/examples/">Back to listing</a>
			</div>
			<p>Manage queue by your own endpoint. Add your custom functionality <b>QUEUE_ENDPOINT</b>.</p>

			<p>Open this Custom queue endpoint dashboard in new browser <b>https://surfly-examples-vino247-1.c9.io/</b></p>
			<br>
			<p>
				In Custom queue handler dashboard have list all our session queue. If we want to track our cancelled session we can use <b>QUEUE_CALLBACK</b>. It will trigger when joined success in queue or session is cancelled.
			</p>

			<p><b>API Ref</b> : <a href="http://docs.surfly.apiary.io/#introduction/customizing-the-user-flow/change-queue-behaviour" target="_blank"> Surfly Api document</a></p>
			<div class="source_link">
				<p><b>Source code</b> : <a href="https://github.com/surfly/examples/blob/gh-pages/custom_queue_functionality/queue_endpoint.html" target="_blank"> Github</a></p>
			</div>
		</div>

		<script type="text/javascript">
			/*
			This is my custom callback function
			if we want to trace session cancelled or closed use CUSTOM_CALLBACK
			If no need to trace leave it as false
			
			CUSTOM_CALLBACK have two param
			1. status true or false
				true - success queue join
				false - cancel, reload, closed
			2. success callback data
			*/
			function custom_callback(status, data)
			{
				if(!status)
				{
					$.get("https://surfly-examples-vino247-1.c9.io/?action=update_queue_status&queue_id="+data, function(response){
						console.log(response);
					});
				}
			}

			(function(){window['_surfly_settings']=window['_surfly_settings']||{"widgetkey": "54731063bfa746ac826d1429f230a0b7",
				"enable_sounds": true,
				"videochat": true,
				"QUEUE_CALLBACK": custom_callback,
				"min_width": 0,
				"agent_can_request_control": false,
				"on_end_redirect_follower_to_queue": true,
				"dock_top_position": false,
				"autohide_control": false,
				"splash": false,
				"theme_font_size": false,
				"hidden": false,
				"theme_font_color": false,
				"set_to_smallest": true,
				"newurl": true,
				"QUEUE_ENDPOINT": "https://surfly-examples-vino247-1.c9.io/", //Custom endpoint
				"agent_can_take_control": false,
				"max_height": 0,
				"white_label": false,
				"min_height": 0,
				"theme_inverted": true,
				"QUEUE_HANDLER": false, //called my custom function
				"autohide_button": true,
				"soft_session_end": false,
				"docked_only": false,
				"theme_font_background": false,
				"ui_off": false,
				"max_width": 0,
				"apiserver": "https://surfly.com/v2/",
				"sharing_button": true,
				"auto_start": false,
				"position": "bottomleft",
				"stealth_mode": true};
				var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src="//surfly.com/static/js/widget.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n);
			})();
		</script>
	</body>
</html>